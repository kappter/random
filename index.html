<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Random Calculator - Enhanced</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
    <div class="container">
        <h1>Live Random Calculator</h1>
        
        <!-- Algorithm Information Panel -->
        <div class="algorithm-info">
            <h2 id="algorithmName">Algorithm: Pi Digits</h2>
            <div class="algorithm-badges">
                <span class="badge badge-type" id="algorithmType">Deterministic</span>
                <span class="badge badge-distribution" id="algorithmDistribution">Uniform (Expected)</span>
            </div>
            <p id="algorithmDescription">Uses the digits of Pi. While deterministic, Pi digits are expected to be uniformly distributed across all bases.</p>
            
            <!-- New: Detailed Information Section -->
            <div class="algorithm-details">
                <div class="detail-section">
                    <h4>üìö Basic Information</h4>
                    <p id="algorithmBasicInfo">Pi's digits have been studied extensively and appear random despite being deterministic.</p>
                </div>
                <div class="detail-section">
                    <h4>‚öôÔ∏è Technical Details</h4>
                    <p id="algorithmTechnicalInfo">Commonly used in demonstrations and educational contexts. Not suitable for cryptography.</p>
                </div>
                <div class="detail-section">
                    <h4>üí° Common Use Cases</h4>
                    <p id="algorithmUseCases">Education, demonstrations, testing statistical analysis tools.</p>
                </div>
                <div class="detail-section">
                    <h4>üíª Programming Language Usage</h4>
                    <p id="algorithmLanguageUsage">Not used as a default PRNG in any major programming language.</p>
                </div>
            </div>
            
            <!-- Statistics Grid -->
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">Mean: <span class="info-icon" title="Average digit value. For uniform distribution in base N, expected mean is (N-1)/2. E.g., base 10 expects ~4.5, base 2 expects ~0.5">‚ÑπÔ∏è</span></span>
                    <span class="stat-value" id="statMean">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Std Dev: <span class="info-icon" title="Standard Deviation measures spread of values. Lower values mean digits cluster near the mean; higher values mean more spread. For uniform distribution, expected ~‚àö((N¬≤-1)/12)">‚ÑπÔ∏è</span></span>
                    <span class="stat-value" id="statStdDev">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Chi-Square: <span class="info-icon" title="Chi-Square test measures how well the distribution matches expected uniform distribution. Lower is better. Values < 10 are excellent, < 20 are good. High values indicate non-uniform patterns">‚ÑπÔ∏è</span></span>
                    <span class="stat-value" id="statChiSquare">-</span>
                </div>
            </div>
        </div>

        <!-- Base System Selector -->
        <div class="control-group">
            <label for="baseSystem">Number Base (2-16):</label>
            <input type="number" id="baseSystem" min="2" max="16" value="10">
            <button onclick="applyBase()">Apply Base</button>
            <span class="badge badge-info" id="baseInfo">Base 10 (Decimal)</span>
        </div>

        <!-- Controls -->
        <div class="control-group">
            <label for="digits">Number of Digits (100-10000):</label>
            <input type="number" id="digits" min="100" max="10000" value="100" step="100">
        </div>

        <div class="control-group">
            <label for="calcType">Algorithm:</label>
            <select id="calcType">
                <option value="pi">Pi Digits</option>
                <option value="gaussian">Gaussian Distribution</option>
                <option value="perlin">Perlin Noise</option>
                <option value="lcg">Linear Congruential Generator</option>
                <option value="mersenne">Mersenne Twister</option>
                <option value="logistic">Logistic Map</option>
                <option value="middleSquare">Middle-Square Method</option>
                <option value="xorshift">Xorshift</option>
                <option value="quantum">Quantum Random (API)</option>
                <option value="rule30">Cellular Automaton Rule 30</option>
            </select>
        </div>

        <div class="control-group">
            <label for="updateFrequency">Update Frequency:</label>
            <select id="updateFrequency">
                <option value="Every 10 digits">Every 10 digits</option>
                <option value="Every 50 digits" selected>Every 50 digits</option>
                <option value="Every 100 digits">Every 100 digits</option>
                <option value="Every 500 digits">Every 500 digits</option>
            </select>
        </div>

        <div class="control-group">
            <label for="speedControl">Generation Speed: <span id="speedValue">100ms</span></label>
            <input type="range" id="speedControl" min="10" max="1000" value="100" step="10">
            <div class="speed-labels">
                <span>Fast (10ms)</span>
                <span>Slow (1000ms)</span>
            </div>
        </div>

        <div class="button-group">
            <button onclick="calculate()">Calculate</button>
            <button id="stepBtn" onclick="stepGeneration()">Step</button>
            <button id="pauseBtn" onclick="pauseResume()">Pause</button>
            <button onclick="reset()">Reset</button>
        </div>

        <!-- Guess Section -->
        <div id="guessSection" class="guess-section">
            <h3>Guess Which Digit Will Have the Most Instances</h3>
            <input type="text" id="guess" placeholder="Enter digit (e.g., 0-9, A, B)" maxlength="1">
            <button id="submitGuess" onclick="submitGuess()">Submit Guess</button>
            <button onclick="toggleGuessSection()">Hide Guess Section</button>
            <p id="guessResult"></p>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <span>Live Digit: <strong id="liveDigit">Not started</strong></span>
            <span>Processed: <strong id="processedCount">0</strong> digits</span>
        </div>

        <!-- Chart Containers -->
        <div class="chart-container">
            <canvas id="digitChart"></canvas>
        </div>
        
        <div class="chart-container">
            <canvas id="timeSeriesChart"></canvas>
        </div>

        <!-- Results -->
        <div class="results">
            <div id="summaryReport"></div>
            <div class="digit-output">
                <h3>Generated Digits:</h3>
                <textarea id="digitSequence" readonly placeholder="Digits will appear here as they are generated..."></textarea>
                <button onclick="copyDigits()">Copy Digits</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
